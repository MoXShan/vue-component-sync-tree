!function(i,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("element-ui/lib/tree"),require("element-ui/lib/icon"),require("element-ui/lib/input"),require("element-ui/lib/button"),require("element-ui/lib/button-group")):"function"==typeof define&&define.amd?define(["element-ui/lib/tree","element-ui/lib/icon","element-ui/lib/input","element-ui/lib/button","element-ui/lib/button-group"],t):i.vueComponentSyncTree=t(i.ELEMENT.Tree,i.ELEMENT.Icon,i.ELEMENT.Input,i.ELEMENT.Button,i.ELEMENT.ButtonGroup)}(this,function(i,t,e,n,s){"use strict";i=i&&i.hasOwnProperty("default")?i.default:i,t=t&&t.hasOwnProperty("default")?t.default:t,e=e&&e.hasOwnProperty("default")?e.default:e,n=n&&n.hasOwnProperty("default")?n.default:n,s=s&&s.hasOwnProperty("default")?s.default:s;var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},a=function(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i},l=function i(t){var e="",n=t.constructor===Array?[]:{};if("object"===(void 0===t?"undefined":o(t))){if(window.JSON)e=JSON.stringify(t),n=JSON.parse(e);else for(var s in t)n[s]="object"===o(t[s])?i(t[s]):t[s];return n}},c=l,d=function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[];return t.forEach(function(s){var r=l(s);Number(s.pid)===Number(e)&&(r.children=i(t,s.id),n.push(r))}),n};require("../lib/vue-component-sync-tree.css");var u={render:function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("div",{staticClass:"v-component-sync-tree"},[e("div",{staticClass:"origin-tree tree-item"},[e("div",{staticClass:"tree-header"},[i._v("源列表")]),i._v(" "),e("div",{staticClass:"tree-body"},[e("el-tree",{ref:"originTree",attrs:{data:i.originTree,"show-checkbox":"",accordion:"","node-key":"id",props:i.defaultProps},on:{"check-change":i.getOriginKeys}})],1)]),i._v(" "),e("div",{staticClass:"tree-cut"},[e("i",{staticClass:"ivu-icon ivu-icon-ios-arrow-right"}),i._v(" "),e("el-icon",{staticClass:"el-icon-arrow-right"})],1),i._v(" "),e("div",{staticClass:"final-tree tree-item"},[e("div",{staticClass:"tree-header"},[i._v("目的列表")]),i._v(" "),e("div",{staticClass:"tree-body"},[e("div",{staticClass:"body-main"},[e("ul",i._l(i.finalTree,function(t){return e("li",{key:t.id},[e("span",{staticClass:"item-text"},[i._v(i._s(t.title))]),i._v(" "),e("span",{staticClass:"item-edit",on:{click:function(e){e.stopPropagation(),i.popEditModal(t.id,t.title)}}},[e("el-icon",{staticClass:"el-icon-edit"})],1),i._v(" "),e("span",{staticClass:"item-del",on:{click:function(e){e.stopPropagation(),i.popDelModal(t.id,t.pid)}}},[e("el-icon",{staticClass:"el-icon-delete"})],1),i._v(" "),e("ul",{staticStyle:{"margin-left":"20px"}},i._l(t.children,function(t){return e("li",{key:t.id},[e("span",{staticClass:"item-text"},[i._v(i._s(t.title))]),i._v(" "),e("span",{staticClass:"item-edit",on:{click:function(e){e.stopPropagation(),i.popEditModal(t.id,t.title)}}},[e("el-icon",{staticClass:"el-icon-edit"})],1),i._v(" "),e("span",{staticClass:"item-del",on:{click:function(e){e.stopPropagation(),i.popDelModal(t.id,t.pid)}}},[e("el-icon",{staticClass:"el-icon-delete"})],1)])}))])}))]),i._v(" "),i.editShow?e("div",{staticClass:"edit-mask"},[e("div",{staticClass:"edit-wrapper"},[e("el-input",{staticClass:"edit-input",model:{value:i.editText,callback:function(t){i.editText=t},expression:"editText"}}),i._v(" "),e("div",{staticClass:"edit-opra-wrapper"},[e("el-button-group",[e("el-button",{staticClass:"edit-cancel",attrs:{type:"default"},on:{click:i.editCancel}},[i._v("\n                                取消\n                            ")]),i._v(" "),e("el-button",{staticClass:"edit-ok",attrs:{type:"primary"},on:{click:i.editOk}},[i._v("\n                                确认\n                            ")])],1)],1)],1)]):i._e(),i._v(" "),i.delShow?e("div",{staticClass:"del-mask"},[e("div",{staticClass:"del-wrapper"},[e("div",{staticClass:"del-text"},[e("el-icon",{staticClass:"el-icon-warning"}),i._v("\n                        是否删除\n                    ")],1),i._v(" "),e("div",{staticClass:"del-opra-wrapper"},[e("el-button-group",[e("el-button",{staticClass:"del-cancel",on:{click:i.delCancel}},[i._v("\n                                取消\n                            ")]),i._v(" "),e("el-button",{staticClass:"del-ok",attrs:{type:"primary"},on:{click:i.delOk}},[i._v("\n                                确认\n                            ")])],1)],1)])]):i._e()])])])},staticRenderFns:[],name:"vueComponentSyncTree",model:{prop:"finalList",event:"change"},props:{finalList:{type:Array,default:function(){return[]}},data:{type:Array,default:function(){return[]}}},data:function(){return{delShow:!1,delId:"",delPid:"",editShow:!1,editText:"",editId:"",originTree:[],originKeys:[],defaultProps:{children:"children",label:"title"}}},components:(r={},a(r,i.name,i),a(r,t.name,t),a(r,e.name,e),a(r,n.name,n),a(r,s.name,s),r),computed:{originList:function(){return this.data},finalTree:function(){return d(this.finalList)},finalKeys:function(){return this.finalList.map(function(i){return i.id})},originToFinalKeys:function(){var i=this,t=[];return this.originList.forEach(function(e){i.originKeys.includes(e.id)&&0!==Number(e.pid)&&t.push(e.pid)}),this.unique([].concat(t,function(i){if(Array.isArray(i)){for(var t=0,e=Array(i.length);t<i.length;t++)e[t]=i[t];return e}return Array.from(i)}(this.originKeys)))}},created:function(){this.initOriginTree()},mounted:function(){this.initOriginChecked()},methods:{popDelModal:function(i,t){this.delId=i,this.delPid=t,this.delShow=!0},delOk:function(){var i=this,t=[];t.push(this.delId),0===Number(this.delPid)?this.finalTree.forEach(function(e){e.id===i.delId&&e.children.forEach(function(i){t.push(i.id)})}):t.push(this.delPid),t.forEach(function(t){i.originKeys=i.removeByValue(i.originKeys,t)}),this.$refs.originTree.setCheckedKeys(this.originKeys),this.delCancel()},delCancel:function(){this.delShow=!1,this.delId="",this.delPid=""},popEditModal:function(i,t){this.editId=i,this.editText=t,this.editShow=!0},editOk:function(){var i=this;this.finalList.forEach(function(t){t.id===i.editId&&(t.title=i.editText)}),this.editCancel()},editCancel:function(){this.editShow=!1,this.editId="",this.editText=""},initOriginTree:function(){this.originTree=d(this.originList)},initOriginChecked:function(){var i=this,t=[];this.finalList.forEach(function(e){0!==Number(e.pid)?t.push(e.id):i.finalList.map(function(i){return i.pid}).includes(e.id)||t.push(e.id)}),this.$refs.originTree.setCheckedKeys(t)},getOriginKeys:function(){this.originKeys=this.$refs.originTree.getCheckedKeys(),this.editCancel(),this.delCancel()},findOut:function(i,t){return i.filter(function(i){return!t.includes(i)})},removeByValue:function(i,t){var e=i.indexOf(t);return-1!==e&&i.splice(e,1),i},unique:function(i){var t=[];return i.forEach(function(i){t.includes(i)||t.push(i)}),t}},watch:{originToFinalKeys:function(){var i=this;this.findOut(this.originToFinalKeys,this.finalKeys).forEach(function(t){i.originList.forEach(function(e){e.id===t&&i.finalList.push(c(e))})}),this.findOut(this.finalKeys,this.originToFinalKeys).forEach(function(t){i.finalList.forEach(function(e){e.id===t&&(i.finalList=i.removeByValue(i.finalList,e))})})},finalList:function(){this.initOriginChecked()}}};return{install:function(i,t){i.component(u.name,u)}}});
